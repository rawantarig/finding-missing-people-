
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Report Missing Persons</title>
    <style>
        #map{
            height:300px;
            width:300px;
            margin-top:10px;
            border:1px solid #ccc
        }
    </style>
    <link rel="stylesheet" href="css/index.css">
    

</head> 
<body> 
    <nav> 
        <div class="logo">Missing People</div>
        <ul>
            <li><a href="index.html" >Home </a></li>
            <li><a href="report.html" class="active">Report</a></li>
            <li><a href="about.html" >About</a></li>
            <li><a href="contact.html" >contact</a></li>
                   
                </ul>
    </nav>
<section class="report">
        <h2>Submit a Missing Persons Report</h2>
        <form id="report-form" action="submit_report" method="POST" enctype="multipart/form-data">
            
<p class="input-container"> 
    <i class="fas fa-user"></i>
    <label for="name" class="i"> Full Name :</label>
    <input type="text" id="name" name="name" placeholder="Enter full name"  required/>
        </p>
        <span class="error-message" id="name-error" ></span>
<p class="input-container"> 
    <i class="fas fa-user" ></i>
    <label for="age" class="i">Age :</label>
    <input type="number" id="age" name="age" placeholder="Enter age" required/>
        </p>
        <span class="error-message" id="age-error" ></span>
    <p class="input-container"> 
    <i class="fas-fa-select"></i>
    <label for="gender" class="i">Gender :</label>
    <select  id="gender" name="gender">
        <option value="">Select Gender</option>
         <option value="male">Male</option>
         <option value="female">Female</option> 
        
    </select>
        </p>
        <span class="error-message" id="gender-error" ></span>
    <p class="input-container">
    <i class="fas-fa-user"></i>
    
    <label for="location" class="i"> Last Known Location</label>
            <input  type="text" list="programming" id="location" 
            name="location" placeholder="select location on map " readonly value="15.5007,32.5599" required/>
       <div id ="map" ></div>
        </p>
        <span class="error-message" id="location-error" ></span>
<p class="input-container">
    <i class="fas-fa-date"></i>
    <label for="date" class="i">Last seen date</label>
    <input type="date" id="date" name="date" required/>
        </p>
        <span class="error-message" id="date-error" ></span>
<p class="input-container"> 
    <i class="fas-fa-time"></i>
    <label for="time" class="i">Last seen Time</label>
    <input type="time" id="time" name="time" required/>
        </p>

        <span class="error-message" id="time-error" ></span>
<p class="input-container"> 
    <i class="fas-fa-description"></i>
    <label for="description" class="i">Physical Description :</label>
    <textarea  id="description" name="description" placeholder="Describe their physical appearance" required>
        </textarea>
        </p>
    
        <span class="error-message" id="description-error" ></span>
<p class="input-container">
    <i class="fas-fa-camera"></i>
    <label for="photo" class="i">Uplod a Recent Photo</label>
    <input type="file" name="photo" id="photo" accept="image/*"  required/>
      </p>
            
      <span class="error-message" id="photo-error" ></span>
      <p class="input-container">
    <i class="fas-fa-envelope"></i>
    <label for="contact" class="i">Your Contact Information :</label>
    <input type="email" id="contact" name="conntact" placeholder="Add email"   required>
        </p>
      <span class="error-message" id="email-error" ></span>

<button id="submit-btn" onclick="sendMail(event)">
Submit
</button>
        </form>
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/all.min.css"> -->
</section>
<script >


       function initMap() {
        var initialLocation={lat:15.5007,lng:32.5599};
        var map = new google.maps.Map(document.getElementById('map'),{
            zoom:12,
            center:initialLocation
        });
        var marker=new google.maps.Marker({
            position:initialLocation,
            map:map,
            draggable:true,
            title:'Drag to select location'
        });
        google.maps.event.addListener(marker,'dragend',function(){
            var position=marker.getPosition();
            document.getElementById('location').value=position.lat().toFixed(6)+","+
            position.lng().toFixed(6);
        });
       }
    

    document.addEventListener("DOMContentLoaded",function(){
        console.log("the button is clicked");

document.getElementById("submit-btn").addEventListener("click", function(event) {
event.preventDefault();

let name = document.getElementById("name").value.trim();
let email = document.getElementById("contact").value.trim();
let age = document.getElementById("age").value.trim();
let photo= document.getElementById("photo").files.length>0;
let gender = document.getElementById("gender").value.trim();
let location = document.getElementById("location").value.trim();
let date = document.getElementById("date").value.trim();
let time = document.getElementById("time").value.trim();
let description = document.getElementById("description").value.trim();


let nameError = document.getElementById("name-error");
let emailError = document.getElementById("email-error");
let photoError = document.getElementById("photo-error");
let ageError = document.getElementById("age-error");
let genderError = document.getElementById("gender-error");
let locationError = document.getElementById("location-error");
let dateError = document.getElementById("date-error");
let timeError = document.getElementById("time-error");
let descriptionError = document.getElementById("description-error");

let nameField = document.getElementById("name");
let emailField = document.getElementById("contact");
let photoField = document.getElementById("photo");
let ageField = document.getElementById("age");
let genderField = document.getElementById("gender");
let locationField = document.getElementById("location");
let dateField = document.getElementById("date");
let timeField = document.getElementById("time");
let descriptionField = document.getElementById("description");


nameError.innerText = "";
ageError.innerText = "";
emailError.innerText = "";
photoError.innerText = "";
genderError.innerText = "";
locationError.innerText = "";
dateError.innerText = "";
timeError.innerText = "";
descriptionError.innerText = "";

let errorFields = [nameError,ageError,genderError,locationError,dateError,timeError,photoError,descriptionError];
let inputFields = [nameField,ageField,genderField,locationField,dateField,timeField,photoField,descriptionField];

errorFields.forEach(error =>error.innerText ="");
inputFields.forEach(field =>field.classList.remove("input-error"));
    
let isValid = true;

if (name === "") {
nameError.innerText = "❌ Please enter missing name";
nameField.classList.add("input-error");
isValid = false;
}
if (email === "" || !email.includes("@")) {
emailError.innerText = "❌ Please enter a valid email";
emailField.classList.add("input-error");
isValid = false;
}
if (age === "") {
ageError.innerText = "❌ Please enter missing age";
ageField.classList.add("input-error");
isValid = false;
}
if (gender === "") {
genderError.innerText = "❌ Please enter missing gender";
genderField.classList.add("input-error");
isValid = false;
}if (location === "") {
locationError.innerText = "❌ Please enter missing last seen location";
locationField.classList.add("input-error");
isValid = false;
}if (date === "") {
dateError.innerText = "❌ Please enter missing last seen date";
dateField.classList.add("input-error");
isValid = false;
}if (time === "") {
timeError.innerText = "❌ Please enter missing last seen time";
timeField.classList.add("input-error");
isValid = false;
}if (description === "") {
descriptionError.innerText = "❌ Please enter missing decription";
descriptionField.classList.add("input-error");
isValid = false;
}
if (!photo) {
photoError.innerText = "❌ Please enter a valid recent photo";
photoField.classList.add("input-error");
isValid = false;
}

// if (isValid) {
// console.log("data is correct,redirecting to about.html")
// window.location.href = "about.html";
// }
});
});
function sendMail(event){
    event.preventDefault();
    const name =encodeURIComponent(document.getElementById("name").value);
    const age =encodeURIComponent(document.getElementById("age").value);
    const gender =encodeURIComponent(document.getElementById("gender").value);
    const location =encodeURIComponent(document.getElementById("location").value);
    const date =encodeURIComponent(document.getElementById("date").value);
    const time =encodeURIComponent(document.getElementById("time").value);
    const description =encodeURIComponent(document.getElementById("description").value);
    const contact =encodeURIComponent(document.getElementById("contact").value);
    const subject =encodeURIComponent("report amissing person");
    const body = 'Name: ${name}%0D%A'+
    'Age: ${ge}%0D%A'+'Gender: ${gender}%0D%A'+'Name: ${name}%0D%A'+
    'Last Known Location: ${location}%0D%A'+'Date: ${date}%0D%A'+'Time: ${time}%0D%A'+
    'Description: ${description}%0D%A'+'Contact info: ${contact}';
    window.location.href='mailto:security-agency@example.com?subject=${subject}&body=${body}';
}
</script>    
<script  async defer 
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBlYZjqXokGB-T-jadJrbjSzh5jqidpeQ&callback=initMap">
</script>
</body>
</html>